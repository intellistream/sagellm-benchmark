# æ–°çš„ Benchmark æ•°æ®ä¸Šä¼ æµç¨‹

## ğŸ¯ è®¾è®¡ç›®æ ‡

1. **ä¸æ±¡æŸ“ git ä»“åº“**ï¼šåŸå§‹å®éªŒæ•°æ®ï¼ˆoutputs/ï¼‰ä¸æäº¤åˆ° git
2. **å¹¶å‘å®‰å…¨**ï¼šå¤šä¸ªç”¨æˆ·åŒæ—¶æäº¤æ•°æ®ä¸ä¼šå†²çª
3. **Token å®‰å…¨**ï¼šæ™®é€šç”¨æˆ·æ— éœ€ HF_TOKEN
4. **ç”¨æˆ·å‹å¥½**ï¼šç®€å•çš„ 3 æ­¥æ“ä½œ

---

## ğŸ“– ç”¨æˆ·å·¥ä½œæµç¨‹

### Step 1: è¿è¡Œ Benchmark

```bash
# è¿è¡Œ benchmarkï¼ˆç”Ÿæˆæ•°æ®åˆ° outputs/ ç›®å½•ï¼‰
sagellm-benchmark run --model gpt2 --backend cpu --workload short

# ç»“æœä¿å­˜åœ¨ outputs/cpu/gpt2/xxx/*_leaderboard.json
```

### Step 2: æœ¬åœ°èšåˆ

```bash
# èšåˆæœ¬åœ°ç»“æœï¼ˆè‡ªåŠ¨ä» HF æ‹‰å–æœ€æ–°æ•°æ®å¹¶åˆå¹¶ï¼‰
sagellm-benchmark aggregate

# æˆ–ç›´æ¥è¿è¡Œè„šæœ¬
python scripts/aggregate_for_hf.py
```

**è¿™ä¸ªå‘½ä»¤ä¼šï¼š**
1. ğŸ“¥ ä» HF ä¸‹è½½æœ€æ–°æ•°æ®ï¼ˆå…¬å¼€è®¿é—®ï¼Œæ— éœ€ tokenï¼‰
2. ğŸ“‚ æ‰«ææœ¬åœ° outputs/ ç›®å½•
3. ğŸ”€ æ™ºèƒ½åˆå¹¶ï¼ˆå»é‡ï¼Œé€‰æ€§èƒ½æ›´å¥½çš„ï¼‰
4. ğŸ’¾ ä¿å­˜åˆ° hf_data/ ç›®å½•

**è¾“å‡ºç¤ºä¾‹ï¼š**
```
======================================================================
ğŸ“¦ sageLLM Benchmark - æœ¬åœ°èšåˆå·¥å…·
======================================================================

ğŸ“¥ ä» Hugging Face ä¸‹è½½æœ€æ–°æ•°æ®...
   ä»“åº“: https://huggingface.co/datasets/wangyao36/sagellm-benchmark-results
  ğŸ“¥ https://huggingface.co/datasets/wangyao36/sagellm-benchmark-results/resolve/main/leaderboard_single.json
    âœ“ 123 æ¡è®°å½•
  ğŸ“¥ https://huggingface.co/datasets/wangyao36/sagellm-benchmark-results/resolve/main/leaderboard_multi.json
    âœ“ 45 æ¡è®°å½•

ğŸ“‚ æ‰«ææœ¬åœ° outputs/ ç›®å½•...
  âœ“ æ‰¾åˆ° 3 æ¡æœ¬åœ°ç»“æœ
  â””â”€ å•æœº: 3 æ¡, å¤šæœº: 0 æ¡

ğŸ”€ æ™ºèƒ½åˆå¹¶æ•°æ®...
  Single (å•æœºå•å¡+å¤šå¡):
    âœ“ æ–°å¢: CPU|1|gpt2|FP32|128|128
    â†‘ æ›´æ–°: CPU|1|gpt2|FP32|2048|512
  ğŸ“Š åˆå¹¶ç»“æœ: æ–°å¢ 1, æ›´æ–° 1, è·³è¿‡ 1, æ€»è®¡ 124

ğŸ’¾ ä¿å­˜åˆ° hf_data/ ç›®å½•...
  âœ“ hf_data/leaderboard_single.json (124 æ¡)
  âœ“ hf_data/leaderboard_multi.json (45 æ¡)

======================================================================
âœ… èšåˆå®Œæˆï¼
======================================================================

ğŸ“Œ ä¸‹ä¸€æ­¥æ“ä½œï¼š
  1. æäº¤èšåˆæ•°æ®åˆ° git:
     git add hf_data/
     git commit -m 'feat: add benchmark results'
     git push

  2. GitHub Actions ä¼šè‡ªåŠ¨:
     - ä¸ HF æœ€æ–°æ•°æ®åˆå¹¶ï¼ˆè§£å†³å¹¶å‘å†²çªï¼‰
     - ä¸Šä¼ åˆ° Hugging Face
     - æ¸…ç† hf_data/ ä¿æŒä»“åº“è½»é‡

ğŸ’¡ æç¤º: outputs/ ç›®å½•ä¸ä¼šè¢«æäº¤ï¼ˆåœ¨ .gitignore ä¸­ï¼‰
======================================================================
```

### Step 3: æäº¤åˆ° Git

```bash
# åªæäº¤ hf_data/ï¼ˆä¸æäº¤ outputs/ï¼‰
git add hf_data/
git commit -m "feat: add gpt2 benchmark results"
git push
```

**GitHub Actions ä¼šè‡ªåŠ¨ï¼š**
1. ğŸ”€ å†æ¬¡ä» HF æ‹‰å–æœ€æ–°æ•°æ®ï¼ˆè§£å†³å¹¶å‘å†²çªï¼‰
2. ğŸ”€ ä¸ä½ æäº¤çš„ hf_data/ åˆå¹¶
3. ğŸ“¤ ä¸Šä¼ åˆ° Hugging Face
4. ğŸ—‘ï¸ åˆ é™¤ hf_data/ ä¿æŒä»“åº“è½»é‡

---

## ğŸ” å¹¶å‘å®‰å…¨æœºåˆ¶

### åœºæ™¯ï¼šä¸¤ä¸ªç”¨æˆ·åŒæ—¶æäº¤

```
æ—¶é—´çº¿ï¼š
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

T1: HF æ•°æ®çŠ¶æ€ v1: [E1, E2]

T2: ç”¨æˆ·A æ‹‰å– v1 â†’ æ·»åŠ  A â†’ ç”Ÿæˆ hf_data/: [E1, E2, A]
    ç”¨æˆ·B æ‹‰å– v1 â†’ æ·»åŠ  B â†’ ç”Ÿæˆ hf_data/: [E1, E2, B]

T3: ç”¨æˆ·A push â†’ Actions å¤„ç†
    - ä» HF æ‹‰å– v1: [E1, E2]
    - åˆå¹¶ hf_data/: [E1, E2, A]
    - ä¸Šä¼  â†’ HF æ›´æ–°ä¸º v2: [E1, E2, A]

T4: ç”¨æˆ·B push â†’ Actions å¤„ç†
    - ä» HF æ‹‰å– v2: [E1, E2, A]  â† åŒ…å« A çš„æ•°æ®ï¼
    - åˆå¹¶ hf_data/: [E1, E2, A, B] â† B çš„æ•°æ®è¿½åŠ 
    - ä¸Šä¼  â†’ HF æ›´æ–°ä¸º v3: [E1, E2, A, B] â† ä¸¤è€…éƒ½ä¿ç•™ï¼

æœ€ç»ˆç»“æœ: HF æ•°æ®åŒ…å« A å’Œ B çš„è´¡çŒ®
```

**å…³é”®**ï¼šGitHub Actions æ€»æ˜¯åŸºäº HF æœ€æ–°ç‰ˆæœ¬åˆå¹¶ï¼Œç¡®ä¿ä¸ä¸¢å¤±ä»»ä½•æ•°æ®ã€‚

---

## ğŸ“‚ ç›®å½•ç»“æ„

```
sagellm-benchmark/
â”œâ”€â”€ outputs/                          # âŒ ä¸æäº¤ï¼ˆåœ¨ .gitignoreï¼‰
â”‚   â””â”€â”€ cpu/gpt2/xxx/*.json          # åŸå§‹å®éªŒæ•°æ®ï¼ˆæœ¬åœ°ä¿ç•™ï¼‰
â”‚
â”œâ”€â”€ hf_data/                          # âœ… ä¸´æ—¶æäº¤ï¼ˆActions åè‡ªåŠ¨åˆ é™¤ï¼‰
â”‚   â”œâ”€â”€ leaderboard_single.json      # å•æœºæ•°æ®ï¼ˆå•å¡+å¤šå¡ï¼‰
â”‚   â””â”€â”€ leaderboard_multi.json       # å¤šæœºæ•°æ®
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ aggregate_for_hf.py          # ç”¨æˆ·æœ¬åœ°èšåˆè„šæœ¬
â”‚   â”œâ”€â”€ merge_and_upload.py          # Actions å¹¶å‘å®‰å…¨åˆå¹¶
â”‚   â””â”€â”€ upload_to_hf.py              # Actions ä¸Šä¼ è„šæœ¬
â”‚
â””â”€â”€ .github/workflows/
    â””â”€â”€ upload-to-hf.yml             # è‡ªåŠ¨ä¸Šä¼  workflow
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: ä¸ºä»€ä¹ˆä¸ç›´æ¥æäº¤ outputs/ï¼Ÿ

**A**: outputs/ åŒ…å«å¤§é‡åŸå§‹å®éªŒæ•°æ®ï¼Œä¼šè®© git ä»“åº“è¿…é€Ÿè†¨èƒ€ã€‚é€šè¿‡èšåˆä¸ºæ ‡å‡†æ ¼å¼çš„ hf_data/ï¼Œä»“åº“ä¿æŒè½»é‡ã€‚

### Q2: hf_data/ ä¼šä¸€ç›´ä¿ç•™åœ¨ git ä¸­å—ï¼Ÿ

**A**: ä¸ä¼šã€‚GitHub Actions ä¸Šä¼ æˆåŠŸåä¼šè‡ªåŠ¨åˆ é™¤ hf_data/ï¼Œä¿æŒä»“åº“è½»é‡ã€‚

### Q3: å¦‚æœæˆ‘å¿˜è®°è¿è¡Œ aggregate ç›´æ¥ push ä¼šæ€æ ·ï¼Ÿ

**A**: å¦‚æœæ²¡æœ‰ hf_data/ ç›®å½•ï¼Œworkflow ä¸ä¼šè§¦å‘ã€‚ä½ éœ€è¦å…ˆè¿è¡Œ `sagellm-benchmark aggregate`ã€‚

### Q4: ä¸¤ä¸ªäººåŒæ—¶æäº¤ä¼šä¸¢å¤±æ•°æ®å—ï¼Ÿ

**A**: ä¸ä¼šï¼GitHub Actions ä¼šåœ¨ä¸Šä¼ å‰å†æ¬¡ä» HF æ‹‰å–æœ€æ–°æ•°æ®åˆå¹¶ï¼Œç¡®ä¿æ‰€æœ‰æ•°æ®éƒ½ä¿ç•™ã€‚

### Q5: æˆ‘éœ€è¦ HF_TOKEN å—ï¼Ÿ

**A**: ä¸éœ€è¦ï¼
- æ‹‰å– HF æ•°æ®ï¼šå…¬å¼€è®¿é—®ï¼Œæ— éœ€ token
- ä¸Šä¼  HF æ•°æ®ï¼šç”± GitHub Actions å®Œæˆï¼Œä½¿ç”¨ GitHub Secrets ä¸­çš„ token

### Q6: å¦‚ä½•æŸ¥çœ‹æˆ‘çš„æ•°æ®æ˜¯å¦ä¸Šä¼ æˆåŠŸï¼Ÿ

**A**: è®¿é—® Hugging Face æ•°æ®é›†é¡µé¢ï¼š
```
https://huggingface.co/datasets/wangyao36/sagellm-benchmark-results
```

### Q7: å¦‚æœæƒ³ä¿ç•™æœ¬åœ° outputs/ æ€ä¹ˆåŠï¼Ÿ

**A**: outputs/ å·²åœ¨ .gitignore ä¸­ï¼Œä¸ä¼šè¢« git è¿½è¸ªã€‚ä½ å¯ä»¥ï¼š
- æœ¬åœ°ä¿ç•™ï¼šoutputs/ ä¼šä¸€ç›´å­˜åœ¨äºä½ çš„æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ
- å¤‡ä»½ï¼šæ‰‹åŠ¨å¤åˆ¶åˆ°å…¶ä»–åœ°æ–¹
- åˆ é™¤ï¼šè¿è¡Œ `rm -rf outputs/` æ¸…ç†

---

## ğŸ¯ ä¼˜åŠ¿æ€»ç»“

| ç‰¹æ€§ | æ—§æ–¹æ¡ˆï¼ˆæäº¤ outputs/ï¼‰ | æ–°æ–¹æ¡ˆï¼ˆæœ¬åœ°èšåˆï¼‰ |
|------|------------------------|-------------------|
| git ä»“åº“å¤§å° | âŒ è†¨èƒ€ | âœ… è½»é‡ï¼ˆåªæœ‰ 2 ä¸ª JSONï¼‰ |
| å¹¶å‘å†²çª | âš ï¸ å¯èƒ½ä¸¢å¤±æ•°æ® | âœ… Actions è‡ªåŠ¨è§£å†³ |
| Token å®‰å…¨ | âœ… é›†ä¸­ç®¡ç† | âœ… é›†ä¸­ç®¡ç† |
| ç”¨æˆ·æ“ä½œ | git push | aggregate + git push |
| æ•°æ®æŒä¹…åŒ– | âœ… git ä¸­ | âœ… HF ä¸­ï¼ˆæƒå¨ï¼‰ |

---

## ğŸ“ å¿«é€Ÿå‚è€ƒ

```bash
# å®Œæ•´å·¥ä½œæµï¼ˆ3 æ­¥ï¼‰
sagellm-benchmark run --model gpt2 --backend cpu  # 1. è¿è¡Œ
sagellm-benchmark aggregate                        # 2. èšåˆ
git add hf_data/ && git commit -m "feat: ..." && git push  # 3. æäº¤

# æŸ¥çœ‹ HF æ•°æ®
open https://huggingface.co/datasets/wangyao36/sagellm-benchmark-results

# æ¸…ç†æœ¬åœ°æ•°æ®ï¼ˆå¯é€‰ï¼‰
rm -rf outputs/
```

---

**æ›´æ–°æ—¥æœŸ**: 2026-01-30
**ç‰ˆæœ¬**: v1.0
